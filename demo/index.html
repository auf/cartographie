<html>
  <head>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css">
    <style media="screen" type="text/css">
      #map {
        height: 500px;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <script src="countries.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

    <div id="map"></div>
    <script type="text/javascript">
      $(function() {

          function getColor(f) {
              if (f) {
                  return 'blue';
              }
          }


          function style(feature) {
            return {
                fillColor: getColor(feature.properties.formations),
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.1 
            };
          }

          map = L.map('map').setView([51.505, -15.09], 13);
          map.setView(new L.LatLng(41.3, 0.7),3);
          var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
          var osm = new L.TileLayer(osmUrl, {
              minZoom: 3,
              maxZoom: 3,
          });
          map.addLayer(osm);
          L.geoJson(countryData, {style: style,
            onEachFeature: function(feature, layer) {
              if (feature.properties.formations) {
                  console.log('oui');
                  l = layer.bindPopup('100 formations');
                  console.log(layer);
              }
           }}).addTo(map);
      })
    </script>
  </body>
</html>
